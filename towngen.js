;(function(){
    "use strict";
    
    var towns = {
        african: ["Aba", "Aboso", "Abu Hammad", "Abu Minqar", "Abu Tartur", "Abu Zenima", "Accra", "Adabiya", "Aga", "Agona Swedru", "Ain Ris", "Akhmim", "Akropong", "Al-Amiriya", "Al-Ayyat", "Al-Birba", "Al-Fashn", "Al-Hamrawayn", "Al-Hindaw", "Al-Kuntilla", "Al-Mahalla al Kubra", "Apam", "As-Salihiya", "Asaba", "Ash-Shallufa", "Assiut", "Atfih", "Az-Zagaziq", "Banda Ahenkro", "Baragoi", "Barramiya", "Begoro", "Benin City", "Bibiani", "Bir Abu Hashim", "Bir Quei", "Bir Umm Gherg", "Biyala", "Bulaq", "Burj Mughaidhil", "Calabar", "Dair Mawas", "Damas", "Dishna", "Duayaw Nkwanta", "Edfu", "El-Alamein", "El-Kanayis", "Elat", "Embu", "Faraskur", "Fidimiin", "Garissa", "Ghazal", "Giza", "Gusau", "Hawsh Isa", "Hohoe", "Ibadan", "Ife", "Ikot Ekpene", "Isiolo", "Itsa", "Japekrom", "Kade", "Kafr asch-Schaich", "Kafrat-Zayyat", "Kano", "Kawm Hamada", "Khanika", "Kilifi", "Kisii", "Koforidua", "Kpandu", "Lagos", "Lekki", "Lokoja", "Machakos", "Maiduguri", "Malindi", "Mandiska", "Marsa Alam", "Masaid", "Minuf", "Monera", "Mpraeso", "Mut", "Nag Hammadi", "Nakuru", "Naro Moru", "Nsawam", "Nyahururu", "Oduponkpehe", "Okene", "Oron", "Oyo", "Prestea", "Qasr al-Farafira", "Qift", "Qus", "Ras al-Hikma", "Ras Jamsah", "Safaga", "Samalut", "Saqqara", "Savelugu", "Sharm el-Sheikh", "Shibin al-Qanatir", "Sidi Abd ar-Rahman", "Sinnuris", "Somanya", "Sunyani", "Taifa", "Talla", "Tarkwa", "Teshie", "Tukh", "Vihiga", "Wajir", "Wenchi", "Wundanyi", "Zagazig", "Zawiyat Shammas"],
        arabic: ["A'zaz", "Abu Kamal", "Ad-Dawr", "Afak", "Afrin", "Ain", "Ainata", "Al Anbar", "Al Diwaniyah", "Al Eskanaria", "Al Hillah", "Al Mehawil", "Al Mosayeb", "Al Muthana", "Al Qasim", "Al Zab", "Al-Awja", "Al-Bab", "Al-Darbasiyah", "Al-Faris", "Al-Haffah", "Al-Hajar al-Aswad", "Al-Hasakah ", "Al-Malikiyah", "Al-Mukharram", "Al-Qa'im", "Al-Qādisiyyah", "Al-Qusayr", "Al-Qutayfah", "Al-Rastan", "Al-Sanamayn", "Al-Suqaylabiyah", "Al-Tall", "Al-Thawrah", "Aleppo ", "Amarah", "An-Nabk", "Ar Rutba", "Ar-Raqqah ", "Arihah", "Arsal", "As Sulaymaniyah", "As-Safira", "As-Suwayda ", "Ash-Shaykh Badr", "Atarib", "Ayn al-Arab", "Baalbek", "Babil", "Baghdad", "Baghdadi", "Baiji", "Balad", "Baniyas", "Baqubah", "Barka", "Basra", "Bechwat", "Bednayel", "Binnish", "Bodai", "Bosra", "Brital", "Btadhi", "Chaat", "Chlifa", "Chmestar - Gharbi Baalbeck", "Dahuk", "Damascus ", "Daraa ", "Darayya", "Dayr 'Atiyah", "Dayr Hafir", "Deir el Ahmar", "Deir ez-Zor ", "Dhi Qar", "Diyala", "Douma", "Douriss", "Dreikiche", "Erbil", "Fakiha - Jdeydeh", "Fallujah", "Fiq", "Fleweh", "Hadath Baalbek", "Haditha", "Halabja", "Halbata", "Hama ", "Harasta", "Harem", "Hazin", "Hīt", "Homs ", "Hosh Barada", "Hosh el Rafika", "Hosh Snid", "Hosh Tal Safiya", "Hrebta", "Idlib ", "Iskandariya", "Izra'", "Jabbouleh", "Jableh", "Janta", "Jarabulus", "Jaramana", "Jisr ash-Shugur", "Kafr Nabl", "Kah", "Karbala", "Karha", "Kasarnaba", "Khan Shaykhun", "Khanaqin", "Khodr", "Khraibeh", "Kirkuk", "Kufa", "Kut", "Laat", "Labweh", "Latakia ", "Ma'arrat Misrin", "Maarat al-Numaan", "Majdloun", "Manbij", "Masyaf", "Mayadin", "Maysan", "Mhardeh", "Mikna", "Mosul (ku: Mûsil)", "Muqdadiyah", "n/a", "Nabi Chit", "Nabi Othman", "Najaf", "Nasiriyah", "Nawa", "Ninawa", "Palmyra", "Qamishli", "Qardaha", "Qatana", "Qudsaya", "Quneitra ", "Ra's al-'Ayn", "Ram - Jbenniyeh", "Ramadi", "Ras Baalbek", "Ras el Hadis", "Saayde", "Safita", "Salah ad Din", "Salamiyah", "Salkhad", "Salqin", "Samarra", "Samawah", "Saraqib", "Sayyidah Zaynab", "Seriine el Fawka", "Seriine el Tahta", "Shahba", "Shamia", "Sulaymaniyah", "Taji", "Tal Abyad", "Tal Afar", "Talbiseh", "Talkalakh", "Talya", "Taraya", "Tartus ", "Tayba", "Tel Keppe", "Temnin el Fawka", "Temnin el Tahta", "Tikrit", "Umm Qasr", "Wadi Faara", "Wasit", "Yabrud", "Yammouneh", "Younine", "Zabadani", "Zakho", "Zubayr"],
        asian: ["Aksu", "Anguo", "Anqing", "Anyang", "Baicheng", "Baoding", "Barkam", "Bei'an", "Beipiao", "Benxi", "Botou", "Chamdo", "Changji", "Changshu", "Chaohu", "Chengdu", "Chishui", "Chongzuo", "Da'an", "Dangyang", "Daqing", "Dazhou", "Dengta", "Dezhou", "Dongfang", "Dongtai", "Dujiangyan", "Emeishan", "Ergun", "Fengcheng", "Fu'an", "Fuqing", "Fuyang", "Gaizhou", "Gaomi", "Gejiu", "Gongyi", "Guangshui", "Guilin", "Gujiao", "Haikou", "Haining", "Hanchuan", "Harbin", "Hegang", "Helong", "Heyuan", "Hohhot", "Hongjiang", "Huai'an", "Huanggang", "Huayin", "Huizhou", "Hunchun", "Jiamusi", "Jiangshan", "Jiaohe", "Jiayuguan", "Jilin", "Jincheng", "Jingjiang", "Jinhua", "Jinzhong", "Jiuquan", "Kaifeng", "Kangding", "Kokdala", "Kunyu", "Laixi", "Langzhong", "Lechang", "Lengshuijiang", "Lianjiang", "Liaocheng", "Lijiang", "Linfen", "Lingyuan", "Linxia", "Lishui", "Liyang", "Longnan", "Lu'an", "Luoding", "Lushui", "Macheng", "Meihekou", "Mengzi", "Miluo", "Muling", "Nangong", "Nantong", "Neijiang", "Ningguo", "Panshi", "Pingdingshan", "Pingxiang", "Putian", "Qidong", "Qingyuan", "Qinyang", "Qiqihar", "Qufu", "Renqiu", "Ruian", "Rushan", "Sanming", "Shanghai", "Shangri-La", "Shanwei", "Shaoxing", "Shenzhen", "Shihezi", "Shiyan", "Shuangliao", "Sihui", "Suifenhe", "Suqian", "Taicang", "Taizhou", "Tengzhou", "Tianshui", "Tongcheng", "Tongliao", "Tumen", "Ulanqab", "Wanyuan", "Weinan", "Wu'an", "Wugang", "Wujiaqu", "Wuxue", "Wuzhou", "Xiangtan", "Xiantao", "Xichang", "Xingning", "Xingyi", "Xinmi", "Xinyang", "Xinzhou", "Xuzhou", "Yancheng", "Yangzhong", "Yantai", "Yichun", "Yingcheng", "Yining", "Yizheng", "Yongkang", "Yucheng", "Yumen", "Yuxi", "Zaozhuang", "Zhangjiakou", "Zhangzhou", "Zhaotong", "Zhijiang", "Zhoukou", "Zhuhai", "Zhuzhou", "Ziyang"],
        dwarf: ["Angern", "Attes", "Bärneck", "Beneschau", "Berlau", "Bessenitz", "Böhmische Haidl", "Böhmische Herslag", "Buchers", "Buggaus", "Cernitz", "Chlumzen", "Christianberg", "Droschelhof", "Dummrowitz", "Eggetschlag", "Ereschtag", "Favoritenhof", "Friedau", "Gilowitz", "Glöckelberg", "Gojau", "Goldkron", "Gollitsch", "Groses Umlowitz", "Hermannschlag u Benešova nad Černou", "Hewraffl", "Hochdorf", "Hochwald", "Hödlwald", "Hofbauernschloss", "Hohenfurth", "Holkau", "Holubau", "Holzrechen", "Honetschlag", "Höritz", "Hörschlag", "Johannesthal", "Kabschowitz", "Kalsching", "Kalten Brunn", "Kaplitz", "Kirzchschlag", "Kladen", "Kleinberg", "Kleinumlowitz", "Kodetschlag", "Kohlgruben", "Krems", "Krenau", "Krenauhof", "Kreuzberg", "Krumau", "Kugelweit", "Lagau", "Lagenbrück", "Lausek", "Liebesdorf", "Lippen", "Loizischen Gereith", "Losnitz", "Lupenz", "Maidstein", "Mainetschlag", "Malsching", "Maltschitz", "Maria Schnee", "Markvartitz", "Mautschlag", "Melm", "Michnitz", "Mirkowitz", "Mistelholz", "Mistelholz-Kollern", "Mitter Zwinzen", "Mojne", "Mollerhof", "Mrzitz", "Mugrau", "Mühlneth", "Muscherad", "Mutzgern", "Nesselbach", "Netrowitz", "Neudorf", "Neuhof", "Neusiedl", "Niedertal", "Ober Breitenschlag", "Oberhaid", "Oberplan", "Oenau", "Oppolz", "Ottau", "Otten", "Parkfried", "Passern", "Perneck", "Pernlesdorf", "Pflanzen", "Pichlern", "Platten", "Pleschowitz", "Pohlen", "Polletitz", "Poreschin", "Pötschmühle", "Pramles", "Prietal", "Prissnitz", "Puchers", "Quidosching", "Ratschin", "Rattschlag", "Reichenau", "Riendles", "Roisching", "Rojau", "Rossenberg", "Rossental", "Rothenhof", "Ruben", "Ruckendorf", "Sahorsch", "Sarau", "Schmiding", "Schöbersdorf", "Schömersdorf", "Schöninger", "Schwarzbach", "Sochors", "Spiegelhütten", "St. Thoma", "Stein", "Stiks", "Stubau", "Stuben", "Subschitz", "Teufelstein", "Teutsmannsdorf", "Trisau", "Troschelhof", "Tusch", "Tweraz", "Unter Breitenstein", "Unter Wuldau", "Unterhaid", "Vogeltenne", "Weichseln", "Weislowitz", "Weleschin", "Wetter", "Wieles", "Wittinghausen", "Wörles", "Zartlesdorf", "Zettwing", "Ziering", "Zippendorf", "Zwiesel"],
        elf: ["Bělá", "Běleň", "Benešov nad Černou", "Besednice", "Blansko", "Blatná", "Bližná", "Boletice", "Borová", "Borovští Uhlíři", "Branná", "Brloh", "Bujanov", "Bukovsko", "Čeřín", "Černá v Pošumaví", "Černice", "Čertova Stěna", "Červený Dvůr", "Český Heršlág", "Český Krumlov", "Cetviny", "Chabičovice", "Chlumec", "Chvalšiny", "Cipín", "Dívčí Kámen", "Dolní Dvořiště", "Dolní Třebonín", "Dolní Vltavice", "Domoradice", "Drahoslavice", "Dubová", "Havalda", "Hejdlov", "Heršlág", "Hněvanov", "Hodňov", "Holkov", "Holubov", "Hořice", "Horní Dvořiště", "Horní Planá", "Horní Třebonín", "Hrudkov", "Hůrka", "Jámy", "Jánské Údolí", "Jelm", "Jenín", "Jílovec", "Kájov", "Kaliště", "Kaplice", "Kladné", "Kleť", "Kovářov", "Křemže", "Křenov", "Křenovský Dvůr", "Křišťanov", "Křížová Hora", "Kuklov", "Kuří", "Květušín", "Kvítkův Dvůr", "Kyselov", "Lazec", "Lipno", "Lojzovy Paseky", "Loučovice", "Louzek", "Malčice", "Malonty", "Malotín", "Malšín", "Maňava", "Markvartice", "Michnice", "Milná", "Mirkovice", "Močerady", "Mojné", "Mokrá", "Mostky", "Mříč", "Muckov", "Mýto", "Nahořany", "Netřebice", "Nová Ves", "Novosedly", "Nový Dvůr", "Olšina", "Omlenice", "Omleničky", "Ostrov", "Pasovary", "Pečkovský Mlýn", "Pernek", "Píhlov", "Plešovice", "Pohoří na Šumavě", "Polná", "Pořešín", "Předmostí-Frýdava", "Přední Výtoň", "Přídolí", "Přísečná", "Prostřední Svince", "Ptačí Hrádek", "Račín", "Radslav", "Rájov", "Rechle", "Rojšín", "Rožmberk", "Rožmitál na Šumavě", "Rybník-Certlov", "Rychnov nad Malší", "Šebanov", "Skláře", "Slavkov", "Slupenec", "Soběnov", "Sokolčí", "Spolí", "Štěkře", "Studánky", "Suš", "Svatý Kámen", "Svatý Tomáš", "Svéráz", "Světlá", "Světlík", "Tichá", "Třísov", "Údolí", "Velešín", "Velislavice", "Větrná", "Větřní", "Vítkův Hrádek", "Všeměřice", "Vyšný", "Vyšší Brod", "Záhoří", "Zátes", "Zátoň", "Žďár", "Žlábek", "Zlatá Koruna", "Zrcadlová Huť", "Zubčice", "Zvonková"],
        indian: ["Adoor", "Ahmednagar", "AlipurdUrban Agglomerationr", "Ambikapur", "Anantapur", "Araria", "Asarganj", "Bagaha", "Baleshwar Town", "Bargarh", "Bathinda", "BhabUrban Agglomeration", "Bhatapara", "Bhiwandi", "Bilaspur", "Byasanagar", "Chatra", "Chirala", "Dalli-Rajhara", "Delhi", "Dhoraji", "Dumka", "Faridabad", "Firozpur", "Giridih", "Gooty", "Gurdaspur", "Haldwani-cum-Kathgodam", "Hisar", "Indore", "Jaipur", "Jamnagar", "Jhargram", "Kadi", "Kalpi", "Kanpur", "Karnal", "Kavali", "Khammam", "Kodungallur", "Kot Kapura", "Kurnool", "Lakheri", "Lalgudi", "Lilong", "Longowal", "Lunglei", "Madhugiri", "Maharajganj", "Mahesana", "Makrana", "Malkangiri", "Manavadar", "Mandi", "Manendragarh", "Mangrol", "Mansa", "Marhaura", "Mathura", "Medininagar (Daltonganj)", "Mhow Cantonment", "Modinagar", "Morena", "Mudabidri", "Mul", "Munger", "Muvattupuzha", "Nadiad", "Nagda", "Naidupet", "Nakur", "Nandura", "Narasapuram", "Narnaul", "Natham", "Nawabganj", "Nehtaur", "Neyyattinkara", "Niwari", "Noorpur", "Oddanchatram", "Pachora", "Pakaur", "Palasa Kasibugga", "Pallapatti", "Panamattom", "Panipat", "Paramakudi", "Parli", "Pathanamthitta", "Pattamundai", "Pavagada", "Peringathur", "Phagwara", "Phusro", "Pinjore", "Pithoragarh", "Porbandar", "Prithvipur", "Punalur", "Purna", "Puttur", "Rafiganj", "Raigarh", "Rajahmundry", "Rajgarh", "Rajpura", "Ramanathapuram", "Ramngarh", "Ranavav", "Rapar", "Ratnagiri", "Rayachoti", "Reoti", "Robertsganj", "Rudrapur", "Sadri", "Sagwara", "Sahjanwa", "Salaya", "Sambalpur", "Sanchore", "Sangli", "Sarangpur", "Satana", "Saundatti-Yellamma", "Sedam", "Shahabad, Hardoi", "Shahpur", "Shamsabad, Farrukhabad", "Sheopur", "Shillong", "Shivpuri", "Shujalpur", "Sihor", "Silapathar", "Sindhagi", "Sirkali", "Siruguppa", "Siwan", "Sonepur", "Sri Madhopur", "Srisailam Project (Right Flank Colony) Township", "Sultanpur", "Supaul", "Suriyampalayam", "Talcher", "Tanda", "Tarbha", "Tenkasi", "Thane", "Theni Allinagaram", "Thiruvarur", "Tilhar", "Tiruchirappalli", "Tiruppur", "Titlagarh", "Tuljapur", "Uchgaon", "Udumalaipettai", "Umbergaon", "Upleta", "Uthiramerur", "Vadodara", "Vapi", "Vellakoil", "Vijayapura", "Viramgam", "Vizianagaram", "Wanaparthy", "Warisaliganj", "Yanam", "Zaidpur"]
    };

    var tavern = ["9 Horse Hitch", " The 10 Bed Inn", " Aerie of the Eagles", " Adventurer’s Hall", " Alchemist’s Alembic", " Ales 'n Beds", " The Alehouse of the Serpents", " The Alicorn", " The Amulet and Wineskin", " Antidote", " Arma Gedd Inn", " Atlastabeer!", " The Axe and Compass", " Axehandle Ale", " Baalzepub", " The Badger and Harp", " Badger Head", " The Bag and Flagon", " The Banjo and Zigzag", " The Bar of Kings", " The Barf Bag", " Bartie's Food and Brew", " The Basque and Feijoa", " Battle Axe Inn", " Bed-And-Boarmeat", " The Bedry", " Beast’s Head", " Beauty Man Garden ", " Bed THIS", " Beefy Stu's Beefy Stews", " The Beehive", " The Beer Guzzler", " The Behir and the Beholder", " Belching Boar", " The Belle", " The Belly Buster", " The Bent Elbows", " Bibbo’s Pub", " Biers ", " The Big Boy", " The Big Red Dog", " Bill & Ted’s Excellent Alehouse", " Blabbering Kobold", " Black Barrels", " Black and Blue Unicorn", " The Black Boar", " The Black Hole", " The  Black Pearl", " The  Black Swan", " Black Wednesday", " The Blind Basilisk", " The  Blind Eye", " Blind Marksman", " Blood of the Vine ", " The Blue Bear", " The Blue Bladesman", " The Blue Duck", " The  Blue Lantern", " Blue Parrot Inn", " The Boar and Spear", " The Boar's Bristles", " The Boar's Chase", " Boar's Head Inn", " Boar's Rest", " Bob's Place", " The Bog and Barrel", " The Boil and Youth", " Booze-up", " Bottomless Keg", " The Bowl's Rim", " Broken Arrow", " Broken Bow", " The Broken Cane", " The Broken Drum", " The Broken Fist", " The  Broken Kender Arms", " Bucket", " The Buffalo's Beard", " The Bull and Finch", " The Bullet and Barrel", " The Bullseye Tavern", " Bunch o' Grapes", " The Bunk House", " Burly Beholder", " Burning Corpse", " The Buxom Wench", " The Cafe of Broken Dreams", " The  Candi Bar", " The Cardinal's Error", " Caritas ", " The Cat and Fiddle", " The Cat and Mouse", " The Cat's Claw Inn", " Cavern", " The Cesspit", " The Chicken's Rest", " Chipped Chalice", " Citadel ", " Clan of the White Wind", " Cloak and Dagger", " The Cloven Hoof", " Inn of Clowns", " The Cock and Hen", " Colored Noun", " The Come on Inn", " The Cow's Horn", " The Creative Marquee", " The Creative Marquis", " Crippled Griffon", " Crazy Cleric", " Crazy Monk", " Crimson Chord", " Crooked Corner", " The Crossed Daggers", " The Crossed Swords", " The Crow's Heart", " The Crow's Nest", " The Cup and Mug", " The Dancing Elephant", " Dancing Giant", " Dancing Kobold", " The Dancing Pig", " Darkroot", " Dave's Hideously Dangerous Animal Emporium", " Days End Inn", " Dead Elf", " Dead Eye Moon", " The Dead Fish", " Dead Kings", " The Dead Man's Bluff", " Dead Mime", " Dead Parrot Inn", " The Deadly Minister's Hall", " Deepwater", " The Demon and Hawk", " Derrin's Divine Brews", " Desert’s Jewel", " The Devil and Deva", " The Dew Drop Inn", " The Dirty Dog", " The Dirty Dwarf", " The Dirty Laundry", " Divine Delights", " The Doan Goe Inn", " The Doctoris Inn", " The Dog and Thrush", " The Dog's Bollocks", " Donnybrook", " The  Dracolich", " The Dragon and Flagon", " The  Dragon Skulls", " The Dragons's Bar", " The Dragon's Breath", " The Dragon's Claw", " The Dragon's Codpiece", " The Dragon's Hoarde", " Dragon’s Jaw", " Dragon's Lair", " Dragon's Spittoon", " Dreaming Dragon", " The Dreaming Elf", " Driest Bone", " Drift On Inn", " Drinker", " Drinking Druid", " The Drinking Ogre", " Dripping Man ", " The Drowned Rat", " The Drunken Boar", " The Drunken Cow ", " Drunken Demon", " Drunken Dog", " Drunken Dragon", " Drunken Dwarf", " Drunken Mephit", " Drunken Monkey", " The  Drunken Owlbear", " The Drunken Sailor", " Drunken Stogg", " Dry Stout", " Duke's", " The  Dungeon and Dragon", " The Duplicate Chant", " Durien's Dazzlin' Darlins", " The Dustbin of Death", " The Dwarf's Axe", " The Dwarf's Keg", " Dwarven Egg", " Eagle", " Easing the Badger", " Inn of the Eastern Delights", " Ebon Flow", " Effervescence", " The Efreeti's Wish", " Eights and Aces", " The Elegant Book", " The Elegant Chant Hall", " The Elegant Prayer Tavern", " Elf’s Ears", " The Elf's Ultimatum", " Elswer's ", " Elven Nations", " Empty Pocket", " End of the Road", " The End of the World", " The Ent Tent", " Ergon’t Taps", " Erics Erotic Dancers", " The Tavern of Ever-full Jugs", " The Eye of the Beholder", " Eye of the Specter", " The Fallen Man", " Farlanghn's Rest", " The Fat Dragon Inn", " Fat Jack's Blues & Grub", " The Fawning Orc", " Feetal's Gizzard", " The Fermented Drunkard", " The Fiery Clap", " The Fig and Gristle", " Fire Mountain Brewery", " Fired Demon", " Fireplace", " The Fisherman's Friend", " Flabby Troll", " The Flame", " The Flaming Snake", " The Flaming Squirrel", " The Flask and Sword", " Flying Fish", " Flying Monk Tavern", " Friends of the Queen", " Forester's", " Foresthome Rest", " Inn of Forsaken Souls", " The Fox and Hound", " The Fox Hole", " The Fox's Tail", " Frog and Duck", " Frog and Peach", " Frogleg Inn", " Frogs Eggs ", " Frost Bite", " Frosted Flagon", " The Frosty Mug", " The Frozen Axe", " The Full Bottle Inn", " The Full Moon Tavern", " The Full Tankard", " Fumbling Ogre", " The Furious Llama", " The Gaff and Slasher", " Geezul's Place", " The Gelded Ranger", " The Giant's Nose", " Gina’s", " Glaring Goblin", " The Gnoll's Belly", " The Goat's Blood", " The Goat's Head", " Gob's ", " Goblins Armpit", " The Golden Chain", " The Golden Dragon Inn", " The Golden Grain", " The Golden Gryphon", " Golden Hammer", " The Golden Lady", " Golden Perch", " The Golden Schooner", " The Golden Stool", " The Good Night Inn", " Gory's Tavern", " The Gray Wizard", " The Great Black Axe", " The Greasy Squeal", " The Inn of the Great Arm", " The  Green Dragon", " The Green Griffon", " The Green Man", " Greyhound", " Grig’s Fiddle", " Grik’s Bar and Billiards", " The Grimy Cauldron", " Gritty McDuff's", " The Grizzly Cave", " Grobo's Grotto", " Grog Barrel", " The Grumbling Dwarf", " The  Guest's Dormitory", " Guinea Pig", " Guts ‘n Glory", " The Gutted Pig", " Halflings' Revenge", " The  Half-way Inn", " The Hall of Narwhals", " Hammer and Anvil", " Anvil Hammer", " The Hamster's Folly", " Hanging Cat", " Hanging Man", " Happy Dwarf", " The Happy Harpy Tavern", " The Happy Hooker", " Happy Lich", " Happy Orc ", " Happy Puppy", " Happy Saturday's", " Happyfeet ", " Harlot’s Galleon", " Harpoon Louie's", " The Harpy's Hideaway", " Harvester’s Gate", " Hatchet Jack's", " Haudhla's", " Head On Inn", " Hearthstone Arms", " The Heart of Oak", " Heaves", " The Helix", " The Hen and Apple", " Herald’s Rest ", " Here's Sin in Your Eye", " Hide Away", " Inn of the Highlighted Eye", " Hillshire Farm", " Hilltop Hideaway", " The Hobbit's Armpit", " The Hobgoblin's Fist", " Hole in the Wall", " The Honest Barrister", " Hops Skip & Jump", " The Horn and Haunch", " The Horn and Hounds", " The Horny Halfling", " The Horse and Hound", " Horwrath's Haven", " House of Cards", " The Hungry Tree", " I Can't Believe It's Not Stolen", " Icarus Descending", " Ice Dragon House", " The Imps Intestine", " Indigo Incubus", " The Inn", " Inn of Clowns", " The Inn of the Eagles", " Inn of the Welcome Wench", " Inter-planetary House of Spam", " The Iron Fist", " Ivy Bush", " The Jade Terrorist", " Jane & Tonnig’s ", " Joe's", " The Joker's Maniacal Frogleg and Nosewart Cafe", " Just Ale ", " Karnov's Bar and Grill", " Kettles Inn", " The Khaki Garter", " Kibbles n' Bits' Inn", " The King's Coin", " The King's Rest", " The King's Spellbook", " The King's Throne", " The Klatchian's Head", " The Knife in the Back", " The Knight's Tournament", " Knotted Beard", " Knyte Lyfe ", " The Kraken", " Kraken’s Throat", " Kraun's", " Krazy Kobold", " The Labyrinth", " L’auberge du cochon siffleur ", " The Lascivious Fairy", " Last Book ", " Last Call ", " Last Chance Inn", " Last Port Tavern", " The Laughing Cat", " The Laughing Cow", " Laughing Dragon", " The Laughing Earl", " The Laughing Fox", " The Laughing Judge", " The Laughing Minotaur", " Laurence's Mug-house", " The Lazy Lamprey", " Lazy Oak", " Leaping Lizardman", " The Lecherous Virgin", " Liar’s Lye", " Library ", " Lich’s Tomb ", " Lion and Lantern", " The Lion's Den", " The Lonely Haystack", " Lonely Unicorn", " The Inn of the Lonely Wanderer", " Looter's ", " The Lost Wayfarer", " The Lotus", " Lunar Night", " The  Mad Fiddler", " Maggot's Rest", " Malenthiyas Hearth", " The Mangy Dog", " The Manicured Mouse", " The  [see The Nicked Bits below} Marbled Lady", " Marty’s Tavern", " The Master and Aubergine", " Mead Market", " The Mended Drum", " Mermaid’s Flagon ", " The Mermaid's Smile", " The Merry Wizard", " Millway’s", " Momma's", " The Monk and Eggplant", " The Mountain Home Inn", " The Mousehole", " The Mug o' Ale", " The Mulled Apple", " The Murdered Priest", " Musty Moldan's Mighty Morsels", " The Nag's Head", " The Nanny's Arms", " Naughty Damsel", " The New Cup", " The New Sword Hall", " The  [see The Marbled Lady above] Nicked Bits", " Night Candle Inn", " Nomadic Revery", " Nonnovyer Buisiness", " The Noisy Bed Inn", " Inn of the Northern Road", " Nothing's Free House", " Nymph’s Grove Tavern", " The Oarhouse", " The Octopus Club", " Oiled Spleen", " The Ol' Bacon and Eggs", " Old Flying Penguin", " The Old Lantern", " The Old Man and the Smee", " Old Rubin's", " The Olde Fox Decieved", " One-eyed Jack’s", " The One-legged Man", " The Only Bar in the Multiverse Without a Convenient Back Door", " The Only Port in a Storm Inn", " The  Open Book", " Old Grant's Ale-house", " The Orange Ogre", " Orc's Armpit", " Orc's Head Inn", " The  Orc's Toenail", " Orc’s Pride", " The Organ and Poinsettia", " Over the Wall ", " The Paladin and Angel", " Pay Up Front", " Peacock Alley", " The Peddler and Cleric", " The Perfumed 'Possum", " Pig and Pie", " The  Pig and Whistle", " The Pink Dragon", " Pink Lady Inn", " The Pipe and Tobacco", " Pistol & Whip", " Plaid Chameleon", " The Plastered Imbecile", " The Playful Party Place", " The Pleasure Palace", " The Port in a Storm", " The Pot Belly", " The  Prancing Pony", " Pub-Pub", " Puke Bucket", " The Priest and Horse", " The Puking Unicorn", " Punchin’ Pete’s Palace", " The Purple Bucket", " Purple Penguin Pub", " The Puzzle and Egg", " Queens Head ", " The Quene's Hed", " Quincy's", " Raging Dire Cow", " The Raging Flea", " The Rain Cloud", " The Rain Song", " The Rampaging Rabbit", " The Rampant Dragon", " Ram’s Horn", " Ram's Lord's Tavern", " The Randy Stoat", " The Ranger's Lookout", " Rasvi & Vijay's Stop and Eat", " The Rats Nest", " The Razorback Inn", " Realm’s Tavern", " Red Barrel Brewery", " Red Crow", " Red Dragon", " The Red Dwarf", " The Red Lantern", " Red Rogue", " The Red Sky Inn", " The Refuge from the Storm", " Rick’s", " Rifle and Whip", " Ripped Kitty", " Road Kill Café", " Road to Araby", " Roadwarden’s Rest", " The Roamer's Pillow", " The Robber's Inn", " Rock Rock Rock ", " The Rolling Meadows", " The Rooster and Spheres", " The Rose and Crown", " Inn of the Rose Gem", " The Rotgut Room", " Rouge Rogue ", " Royal Pockets", " The Ruby Blade", " The Ruby Lips", " The Rusty Blade", " Rusty Grog ", " The Rusty Justicar", " Rusty Nail", " Rusty Vampire", " The Safe Haven", " The  Safe House", " The Sahuagen and Lady", " The Sailor's Delight", " The Salty Dog", " Saltsail’s", " The Satyr and Stiletto", " The Sauce Bucket", " Inn Scheister's Casino", " Sea Barrel", " The Sea Dog", " Seabreeze Inn", " Seatin' 'N Eatin'", " Seven Priests", " Severed Arms", " The Sexist Pig", " Screaming Demon", " The Shallow Swamp", " The Shining Gem", " The Ship's Wheel", " The Shipyard", " Short Neck Clam Town Inn and Tavern", " The Shot in the Dark", " The Sign of the Cringing Eunuch", " The Sign of the Golden Orange", " The Sign of the Jester", " Sign of the Northward Gull", " Sign of the Sign ", " The Sign of the Talon", " The Silver Axe", " The  Silver Cypher", " The Silver Oak Inn", " The Silver Snail", " The Singing Boar", " Site of the Harvest", " Six Flags over Mead", " The  Skull-Dragon Inn", " Slade's", " Slap and Tickle", " Slaughtered Cabbage", " The  Slaughtered Lamb", " Sleep Here", " The Sleeping Demon", " The Sleepy Halfling", " The Slippery Eel", " The Sloppy Salamander", " The Slugfest", " The Slumbering Serpent", " The Smiling Orc", " The Smithy's Armpit", " The Snake Pit", " The Snake's Foot", " Snoring Troll", " The Solar Night", " The Song Bird", " Sottish Gnome", " Spend the Knight Inn", " Spit and the Fire", " Splintered Ego Tavern", " The Spread-eagled Bugbear", " The Squalid Claw", " Stalin’s Mother", " The Sterling Hook", " The Step Right Inn", " The Stinking Cow", " The Stinking Boar Inn", " The Stinky Tuna", " Stowaway", " Strange Brew", " The Strangled Cat", " Strong Drink", " Student's Hideaway ", " The Stumble on Inn", " Stump", " Stumpy Bob's House of Beer", " The Succubus", " The Sundown", " Supply in the Sky ", " Surly Goat", " The Svirfneblin's Ear", " The Swagger and Swivel", " Swashbuckler's Luck", " Sword's Sleep", " Tattered Crown", " Tavern", " Tavern of the Blushing Barmaids", " The Tavern of Ever-full Jugs", " Tavern on the Edge ", " Ted’s Beer and Bathhouse", " The Temple of Gruumsh", " Thank God It’s Open", " The Thiefs Knot", " Thirsty Vampire", " The Thirsty Whale", " This Ain't Your Daddy's Bar", " Three Eye Tavern", " The Three Gables", " Three Happy Mice", " Three Lions", " Three Sheets", " Three Swords", " The Thug and Succubus", " The Thunderbird Club", " Thurston's Brass Tankard", " Time’s Grave", " Tipsy McStagger’s", " The Tipsy Tarrasque", " Tipsy Troll Tavern", " The Tired Dog", " The Tired Traveller", " Toad & Turtle", " The  Toss-It-Back", " The Tower Tavern", " The Townhouse", " Treadwell’s Beer and Sausage", " The Tree With Antlers", " Trog Scent Tavern", " Troll Breath Repository", " Troll Slayer Tavern", " Troll’s Head Inn", " The  Trough", " Turkey Cove Sleep and Eat", " Twin Left Feet", " Twisted Boot", " The Two-Fingered Troll", " The Two Halfling's Inn", " Two Steeple Inn ", " The Ulcer", " Valabar's", " Van Smack's Tavern and Inn", " The Victorious Egret", " Vincent's Gin-Palace", " The Violet Vein", " The Violent Dog", " The Violent Priestess Hall", " The Virgin and Nightmare", " The Voluptuous Elf", " Vulgar Unicorn", " The Wagonhouse", " The Wagon Wheel", " The Wand and the Stein", " The Wandering Mistrel", " The Wandering Serpent Inn", " The Wanton Wench", " Warm Socks", " The Watchman's Light", " The Way Out Inn", " The Wayfarer's Home", " The Wayfarer's Lay", " The Weary Wanderer", " The Weasels Warble", " The Weigh Inn", " The Inn of the Well Worn Wench", " We're Not Hostel", " Wet Dog", " Whirling Dervish", " The Whisper and Boil", " Whistling Oyster", " The Whistling Pig", " The White Hand", " White Hart", " The White Roc Inn", " White Spear", " The White Tree", " Whiteblade’s Winery", " Whompers", " The Widowers Den", " The Wig and Thistle", " The Wild Chessman", " The Wild Side", " The Wiley Winnint", " Willowbee's Brewery", " The Willow", " The Wine of Heaven", " The Wistful Wyvern", " The Wizard's Tower", " Wobblin’ Will’s Wide World of Whiskey", " Wobbling Goblin", " Wobbly Boot", " The Wolfhound", " The Wolf's Den", " The Wooden Pillow", " The Woolystonecrafters Inn", " World of Wines", " World's End Inn", " Worn Cudgel", " The Wrong Bar", " The Yawning Dog", " The Yawing Portal", " Ye Granny’s Ale", " The Yellow Necromancer", " The Zoo"];
    
    var BoxStyle = "<div style='box-shadow: 3px 3px 2px #000000; font-family: Verdana; fontWeight: bold; text-align: center; vertical-align: middle; padding: 2px 2px; margin-top: 0.2em; border: 1px solid #000; border-radius: 8px 8px 8px 8px; color: #000000; background-color: #FFFFFF;'>";

    
    on('chat:message',function(msg){

        if('api' !== msg.type){
            return;
        }

        let cmds = msg.content.split(/\s+/);
        
        if( cmds[0] === "!village" ){
            var minpop = 100;
            var maxpop = 500;
            var pop = population(minpop,maxpop);
            var mininn = 1;
            var maxinn = 4;
            var number_inns = inn_number(mininn, maxinn);
            var inn_list = [];
            inn_list = inn_names(number_inns);
            village();
        }
        
        if( cmds[0] === "!town" ){
            var minpop = 1000;
            var maxpop = 10000;
            var pop = population(minpop,maxpop);
            var mininn = 4;
            var maxinn = 10;
            var number_inns = inn_number(mininn, maxinn);
            var inn_list = [];
            inn_list = inn_names(number_inns);
            town();
        }
         
        if( cmds[0] === "!city" ){
            var minpop = 10000;
            var maxpop = 1000000;
            var pop = population(minpop,maxpop);
            var mininn = 10;
            var maxinn = 15;
            var number_inns = inn_number(mininn, maxinn);
            var inn_list = [];
            inn_list = inn_names(number_inns);
            city();
        }
        
        function population(){
            var p = Math.floor(Math.random()*(maxpop-minpop+1))+minpop;
            return p;
        }
        
        function inn_number(){
            var inn_no = Math.floor(Math.random()*(maxinn-mininn+1))+mininn;
            return inn_no;
        }
        
        function inn_names(){
            var parts = number_inns;
            var innnames = [];

            var i; for (i = 0; i < parts; i++) {
                var n = _.sample(tavern);
                var name = n;
                var last_n = n;

                while (name.length < parts) {
                    n = _.sample(tavern);
                    name += n;
                    last_n = n;
                }
                innnames.push(name);
            }
            return innnames.join('<br>');
        }
        
        
        function village(){
            if( '!village' === cmds.shift()){
                if(cmds.length) {
                    let location=(cmds.shift()||'').toLowerCase();
                    let townname = _.sample(_.keys(towns[location]));
                    
                    sendChat('',`${BoxStyle} <b>Town name is: ${_.sample(towns[location])}</b><br><b>Population is:</b> ${pop}<br>Number of Inns: ${number_inns}<br><b>Inn names:<br> ${inn_list}</b></div>`);
                } else {
                    sendChat('',`${BoxStyle} <b>No location</b>.  Available options are: <b>${_.keys(towns).join(', ')}</b></div>`);
                } 
            } 
        }
        
        function town(){
            if( '!town' === cmds.shift()){
                if(cmds.length) {
                    let location=(cmds.shift()||'').toLowerCase();
                    let townname = _.sample(_.keys(towns[location]));
                    
                    sendChat('',`${BoxStyle} <b>Town name is: ${_.sample(towns[location])}</b><br><b>Population is:</b> ${pop}<br>Number of Inns: ${number_inns}<br><b>Inn names:<br> ${inn_list}</b></div>`);
                } else {
                    sendChat('',`${BoxStyle} <b>No location</b>.  Available options are: <b>${_.keys(towns).join(', ')}</b></div>`);
                } 
            } 
        }
        
        function city(){
            if( '!city' === cmds.shift()){
                if(cmds.length) {
                    let location=(cmds.shift()||'').toLowerCase();
                    let townname = _.sample(_.keys(towns[location]));
                    
                    sendChat('',`${BoxStyle} <b>Town name is: ${_.sample(towns[location])}</b><br><b>Population is:</b> ${pop}<br>Number of Inns: ${number_inns}<br><b>Inn names:<br> ${inn_list}</b></div>`);
                } else {
                    sendChat('',`${BoxStyle} <b>No location</b>.  Available options are: <b>${_.keys(towns).join(', ')}</b></div>`);
                } 
            } 
        }
    });
}());
        
        
